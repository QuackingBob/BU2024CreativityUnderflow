<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Replicated Layout</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/document_list.css' %}" />
</head>

<body>
    <form action="{% url 'logout' %}" method="post" style="display:inline;">
        <div class="container">
            <!-- Sidebar -->
            <div class="sidebar">
                <input type="text" placeholder="Search..." />
                <a href="#">Notes</a>
                <a href="#">Rendered</a>

                {% csrf_token %}
                <button type="submit">Logout</button>
            </div>

            <!-- Main content area -->
            <div class="main-content">
                <h2>Subject</h2>
                <div class="card-grid">
                    <!-- Cards -->
                    <div class="card">
                        <div class="badge"></div>
                        <div class="card-footer">
                            <p><strong>Name</strong></p>
                            <p>November 1, 2024</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="badge"></div>
                        <div class="card-footer">
                            <p><strong>Name</strong></p>
                            <p>November 1, 2024</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="badge"></div>
                        <div class="card-footer">
                            <p><strong>Name</strong></p>
                            <p>November 1, 2024</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="badge"></div>
                        <div class="card-footer">
                            <p><strong>Name</strong></p>
                            <p>November 1, 2024</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="badge"></div>
                        <div class="card-footer">
                            <p><strong>Name</strong></p>
                            <p>November 1, 2024</p>
                        </div>
                    </div>
                    {% for note in documents %}
                    <div class="card">
                        {% if note.img_content %}
                        <img src="{{ note.img_content.url }}" alt="Note Image" class="card-img-top">
                        {% endif %}

                        <div class="badge">{{ note.owner.username }}</div>

                        <div class="card-body">
                            <h5 class="card-title" onclick="openNotePage('{{ note.docid }}')">{{ note.title }}</h5>
                            <p class="card-text">
                                {{ note.content|linebreaks }} <!-- Renders LaTeX content if using a renderer -->
                            </p>
                        </div>

                        <div class="card-footer">
                            <p><strong>{{ note.owner.username }}</strong></p>
                            <p>{{ note.created_at|date:"F j, Y" }}</p>
                        </div>
                    </div>
                    {% endfor %}

                    <!-- Add more cards as needed -->
                </div>
            </div>

            <!-- Floating button -->
            <button class="button">
                <img src="{% static 'icons\new-svgrepo-com.svg' %}" style="height: 1" />
            </button>
        </div>
        </div>
    </form>

    <script>
        function openNotePage(noteId) {
            // Redirect to a specific note's page (URL to be defined in your Django view)
            window.location.href = `/notes/${noteId}/`;
        }

        function openNewNotePage() {
            // Redirect to the "new note" page
            window.location.href = '/notes/new/';
        }
    </script>
</body>

</html>